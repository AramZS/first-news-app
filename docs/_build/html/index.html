<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>First News App &mdash; First News App 2.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="First News App 2.0 documentation" href="#" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="#">First News App 2.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="first-news-app">
<h1>First News App<a class="headerlink" href="#first-news-app" title="Permalink to this headline">¶</a></h1>
<p>A step-by-step guide to building a simple news application with Python, Flask and GitHub.</p>
<p>Prepared for training sessions of <a class="reference external" href="http://www.ire.org/">Investigative Reporters and Editors (IRE)</a>
and the <a class="reference external" href="http://data.nicar.org/">National Institute for Computer-Assisted Reporting (NICAR)</a>.</p>
<div class="section" id="prelude-hello-command-line">
<h2>Prelude: Hello command line<a class="headerlink" href="#prelude-hello-command-line" title="Permalink to this headline">¶</a></h2>
<p>Before you can begin, your computer needs the following tools installed and working to work through
the tutorial below.</p>
<ul class="simple">
<li>A <a class="reference external" href="https://en.wikipedia.org/wiki/Command-line_interface">command-line interface</a> to interact with your computer</li>
<li>A <a class="reference external" href="https://en.wikipedia.org/wiki/Text_editor">text editor</a> to work with plain text files</li>
<li><a class="reference external" href="http://git-scm.com/">Git</a> version control software and an account at <a class="reference external" href="http://www.github.com">GitHub.com</a></li>
<li>Version 2.7 of the <a class="reference external" href="http://python.org">Python</a> programming language</li>
<li>The <a class="reference external" href="http://www.pip-installer.org/en/latest/installing.html">pip</a> package manager for Python</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Depending on your experience and operating system, you might already be ready
to go with everything above. If so, move on to the next chapter. If not,
don&#8217;t worry. And don&#8217;t give up! It will be a bit of a
slog but the instructions below will point you in the right direction.</p>
</div>
<div class="section" id="id1">
<h3>Command-line interface<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Unless something is wrong with your computer, there should be a way to open a window that lets you
type in commands. Operating systems give this function slightly different names, but they all have
some form of it, and there are alternative programs you can install as well.</p>
<p>On Windows this can be done by opening the &#8220;command prompt.&#8221; Here are instructions for
<a class="reference external" href="http://windows.microsoft.com/en-us/windows/command-prompt-faq#1TC=windows-8">Windows 8</a>
and <a class="reference external" href="http://windows.microsoft.com/en-us/windows-vista/open-a-command-prompt-window">earlier versions</a>. On
an Apple desktops, this can be done by opening the <a class="reference external" href="http://blog.teamtreehouse.com/introduction-to-the-mac-os-x-command-line">&#8220;Terminal&#8221; application</a>. Ubuntu Linux
uses the same name, also calling its default program <a class="reference external" href="http://askubuntu.com/questions/38162/what-is-a-terminal-and-how-do-i-open-and-use-it">Terminal</a>.</p>
</div>
<div class="section" id="id2">
<h3>Text editor<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>A program like Microsoft Word, which can do all sorts of formatting like
change the size and color of words, is not what we&#8217;re talking about. Do not try to use it.</p>
<p>You need a program that works with simple <a class="reference external" href="https://en.wikipedia.org/wiki/Text_file">&#8220;plain text&#8221; files</a>,
capable of editing documents containing Python code, HTML markup and other languages without
dressing them up. They are easy to find. Some of the fancy ones cost money, but
I&#8217;m going to recommend you start out with a free options.</p>
<p>For Windows, I recommend installing <a class="reference external" href="http://notepad-plus-plus.org/">Notepad++</a>. For
Apple computers, try <a class="reference external" href="http://www.barebones.com/products/textwrangler/download.html">TextWrangler</a>. In
Ubuntu Linux stick with the pre-installed <a class="reference external" href="https://help.ubuntu.com/community/gedit">gedit</a> text editor.</p>
</div>
<div class="section" id="git-and-github">
<h3>Git and GitHub<a class="headerlink" href="#git-and-github" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://git-scm.com/">Git</a> is a version control program for saving the changes
you make to files over time. This is useful when you&#8217;re working on your own,
but quickly becomes essential with large software projects, especially if you work with other developers.</p>
<p><a class="reference external" href="https://github.com/">GitHub</a> is a website that hosts git code repositories, both public and private. It comes
with many helpful tools for reviewing code and managing projects. It also has some
<a class="reference external" href="http://pages.github.com/">extra tricks</a> that make it easy to publish web pages, which we will use later.</p>
<p>GitHub offers helpful guides for installing Git for
<a class="reference external" href="https://help.github.com/articles/set-up-git#platform-windows">Windows</a>,
<a class="reference external" href="https://help.github.com/articles/set-up-git#platform-mac">Macs</a> and
<a class="reference external" href="https://help.github.com/articles/set-up-git#platform-linux">Linux</a>. You can verify
it&#8217;s installed from your command line.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>git --version
</pre></div>
</div>
<p>Once that&#8217;s done, you should create an account at GitHub, if you don&#8217;t already have one.
It shouldn&#8217;t cost you anything. <a class="reference external" href="https://github.com/pricing">The free plan</a>
is all that&#8217;s required to complete this lesson.</p>
</div>
<div class="section" id="id4">
<h3>Python<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>If you are using Mac OSX or a common flavor of Linux, Python is probably already installed and you can
test to see what version, if any, is there waiting for you by typing the following into your terminal.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>python -V
</pre></div>
</div>
<p>If you don&#8217;t have Python installed (a more likely fate for Windows users) try downloading and installing it from <a class="reference external" href="http://www.python.org/download/releases/2.7.6/">here</a>. Python 2.7 is preferred but you can probably find a
way to make most of this tutorial work with other versions if you stick with it.</p>
</div>
<div class="section" id="id5">
<h3>pip<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>The <a class="reference external" href="http://www.pip-installer.org/en/latest/index.html">pip package manager</a>
makes it easy to install open-source libraries that
expand what you&#8217;re able to do with Python. Later, we will use it to install everything
needed to create a working web application.</p>
<p>If you don&#8217;t have it already, you can get pip by following
<a class="reference external" href="http://www.pip-installer.org/en/latest/installing.html">these instructions</a>.
Verify it&#8217;s installed with the following.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>pip -V
</pre></div>
</div>
</div>
</div>
<div class="section" id="act-1-hello-database">
<h2>Act 1: Hello Database<a class="headerlink" href="#act-1-hello-database" title="Permalink to this headline">¶</a></h2>
<p>First, create your Django project</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>django-admin.py startproject interactive_poll
</pre></div>
</div>
<p>Jump and start it up for the first time</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd </span>interactive_poll
<span class="nv">$ </span>python manage.py runserver
</pre></div>
</div>
<p>If you visit <a class="reference external" href="http://localhost:8000">http://localhost:8000</a> in your browser, you should see Django&#8217;s &#8220;Hello World&#8221; page,
indicating that you&#8217;ve got everything properly configured and are ready to begin work.</p>
<p>Then you start in on your app by first settings your database connection. For this app,
we&#8217;ll be creating a Sqlite database.</p>
<p>In your settings.py file, replace the default database configuration with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s">&#39;django.db.backends.sqlite3&#39;</span><span class="p">,</span>
        <span class="s">&#39;NAME&#39;</span><span class="p">:</span> <span class="s">&#39;database.db&#39;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Then back in your shell run the following command to create your database. When it asks, be sure to create a superuser. We&#8217;ll need it later.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>python manage.py syncdb
</pre></div>
</div>
<p>Now we will create an &#8220;application&#8221;, Django slang for a package of code. We&#8217;ll call it &#8220;polls.&#8221;</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>python manage.py startapp polls
</pre></div>
</div>
<p>You&#8217;ll now find a folder called &#8220;polls&#8221; where we&#8217;ll be building our app. The models file is where we define our database tables.
Go in there and add the following to the models.py file, which will act as the blueprint for two new tables.</p>
<div class="highlight-python"><div class="highlight"><pre> <span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="hll"> <span class="k">class</span> <span class="nc">Poll</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span><span class="hll">     <span class="sd">&quot;&quot;&quot;</span>
</span><span class="hll"><span class="sd">     A poll we ask users to vote on.</span>
</span><span class="hll"><span class="sd">     &quot;&quot;&quot;</span>
</span><span class="hll">     <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</span><span class="hll">     <span class="n">pub_date</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">()</span>
</span><span class="hll">
</span><span class="hll"> <span class="k">class</span> <span class="nc">Vote</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span><span class="hll">     <span class="sd">&quot;&quot;&quot;</span>
</span><span class="hll"><span class="sd">     A yes or no vote.</span>
</span><span class="hll"><span class="sd">     &quot;&quot;&quot;</span>
</span><span class="hll">     <span class="n">poll</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Poll</span><span class="p">)</span>
</span><span class="hll">     <span class="n">choice</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>
</span></pre></div>
</div>
<p>Now return do the settings.py file and add a line to the INSTALLED_APPS list with the name of our new app.</p>
<div class="highlight-python"><div class="highlight"><pre> <span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">(</span>
     <span class="s">&#39;django.contrib.auth&#39;</span><span class="p">,</span>
     <span class="s">&#39;django.contrib.contenttypes&#39;</span><span class="p">,</span>
     <span class="s">&#39;django.contrib.sessions&#39;</span><span class="p">,</span>
     <span class="s">&#39;django.contrib.sites&#39;</span><span class="p">,</span>
     <span class="s">&#39;django.contrib.messages&#39;</span><span class="p">,</span>
     <span class="s">&#39;django.contrib.staticfiles&#39;</span><span class="p">,</span>
     <span class="c"># Uncomment the next line to enable the admin:</span>
     <span class="c"># &#39;django.contrib.admin&#39;,</span>
     <span class="c"># Uncomment the next line to enable admin documentation:</span>
     <span class="c"># &#39;django.contrib.admindocs&#39;,</span>
<span class="hll">     <span class="s">&#39;polls&#39;</span><span class="p">,</span>
</span> <span class="p">)</span>
</pre></div>
</div>
<p>Sync your database again and your new tables will be created in the database.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>python manage.py syncdb
</pre></div>
</div>
</div>
<div class="section" id="act-2-hello-admin">
<h2>Act 2: Hello Admin<a class="headerlink" href="#act-2-hello-admin" title="Permalink to this headline">¶</a></h2>
<p>Go back into settings.py and uncomment &#8220;django.contrib.admin&#8221; in INSTALLED_APPS</p>
<div class="highlight-python"><div class="highlight"><pre> <span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">(</span>
     <span class="s">&#39;django.contrib.auth&#39;</span><span class="p">,</span>
     <span class="s">&#39;django.contrib.contenttypes&#39;</span><span class="p">,</span>
     <span class="s">&#39;django.contrib.sessions&#39;</span><span class="p">,</span>
     <span class="s">&#39;django.contrib.sites&#39;</span><span class="p">,</span>
     <span class="s">&#39;django.contrib.messages&#39;</span><span class="p">,</span>
     <span class="s">&#39;django.contrib.staticfiles&#39;</span><span class="p">,</span>
     <span class="c"># Uncomment the next line to enable the admin:</span>
<span class="hll">     <span class="s">&#39;django.contrib.admin&#39;</span><span class="p">,</span>
</span>     <span class="c"># Uncomment the next line to enable admin documentation:</span>
     <span class="c"># &#39;django.contrib.admindocs&#39;,</span>
     <span class="s">&#39;polls&#39;</span><span class="p">,</span>
 <span class="p">)</span>
</pre></div>
</div>
<p>Sync the database to create the admin&#8217;s set of tables.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>python manage.py syncdb
</pre></div>
</div>
<p>Now go into the urls.py file and uncomment the lines related to the admin, look like so</p>
<div class="highlight-python"><div class="highlight"><pre> <span class="kn">from</span> <span class="nn">django.conf.urls.defaults</span> <span class="kn">import</span> <span class="n">patterns</span><span class="p">,</span> <span class="n">include</span><span class="p">,</span> <span class="n">url</span>

 <span class="c"># Uncomment the next two lines to enable the admin:</span>
<span class="hll"> <span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
</span><span class="hll"> <span class="n">admin</span><span class="o">.</span><span class="n">autodiscover</span><span class="p">()</span>
</span>
 <span class="n">urlpatterns</span> <span class="o">=</span> <span class="n">patterns</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span>
     <span class="c"># Examples:</span>
     <span class="c"># url(r&#39;^$&#39;, &#39;interactive_poll.views.home&#39;, name=&#39;home&#39;),</span>
     <span class="c"># url(r&#39;^interactive_poll/&#39;, include(&#39;interactive_poll.foo.urls&#39;)),</span>

     <span class="c"># Uncomment the admin/doc line below to enable admin documentation:</span>
     <span class="c"># url(r&#39;^admin/doc/&#39;, include(&#39;django.contrib.admindocs.urls&#39;)),</span>

     <span class="c"># Uncomment the next line to enable the admin:</span>
<span class="hll">     <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^admin/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">)),</span>
</span> <span class="p">)</span>
</pre></div>
</div>
<p>Now fire up the runserver,</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>python manage.py runserver
</pre></div>
</div>
<p>And now log in at <a class="reference external" href="http://localhost:8000/admin/">http://localhost:8000/admin/</a>, where you&#8217;ll see Django&#8217;s generic administration
system. But you&#8217;ll notice that your app&#8217;s database tables aren&#8217;t in there.</p>
<p>To add them, create a file called admin.py in the &#8220;polls&#8221; folder and add the following.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">polls.models</span> <span class="kn">import</span> <span class="n">Poll</span><span class="p">,</span> <span class="n">Vote</span>
<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>

<span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Poll</span><span class="p">)</span>
<span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Vote</span><span class="p">)</span>
</pre></div>
</div>
<p>Now, if you visit <a class="reference external" href="http://localhost:8000/admin/">http://localhost:8000/admin/</a> again you should find administration panels
for entering data into the poll&#8217;s database tables.</p>
<p>For the purposes of this demonstration, I created a poll with the title
&#8220;Python is the best programming language&#8221;. When we finish our site, users will be able
vote up or down my claim. Feel free to insert your own title, but drop one or two in there, and check
the active flag, so we have something to work with.</p>
<p>You&#8217;ll notice that the lists in the database have boring names for each entry. To fix that, jump back into models.py and add a string representation of your object to the model Poll.</p>
<div class="highlight-python"><div class="highlight"><pre> <span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

 <span class="k">class</span> <span class="nc">Poll</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
     <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">     A poll we ask users to vote on.</span>
<span class="sd">     &quot;&quot;&quot;</span>
     <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
     <span class="n">pub_date</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">()</span>

<span class="hll">     <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class="hll">         <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span>
</span>
 <span class="k">class</span> <span class="nc">Vote</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
     <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">     A yes or no vote.</span>
<span class="sd">     &quot;&quot;&quot;</span>
     <span class="n">poll</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Poll</span><span class="p">)</span>
     <span class="n">choice</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="act-3-hello-internets">
<h2>Act 3: Hello Internets<a class="headerlink" href="#act-3-hello-internets" title="Permalink to this headline">¶</a></h2>
<p>First, lets create an new url that will serve as our site&#8217;s homepage, often called an &#8220;index&#8221; page by Internet geeks.</p>
<div class="highlight-python"><div class="highlight"><pre> <span class="kn">from</span> <span class="nn">django.conf.urls.defaults</span> <span class="kn">import</span> <span class="n">patterns</span><span class="p">,</span> <span class="n">include</span><span class="p">,</span> <span class="n">url</span>

 <span class="c"># Uncomment the next two lines to enable the admin:</span>
 <span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
 <span class="n">admin</span><span class="o">.</span><span class="n">autodiscover</span><span class="p">()</span>

 <span class="n">urlpatterns</span> <span class="o">=</span> <span class="n">patterns</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span>
     <span class="c"># Examples:</span>
<span class="hll">     <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^$&#39;</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="s">&#39;polls.views.index&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;polls_index_view&#39;</span><span class="p">),</span>
</span>     <span class="c"># url(r&#39;^interactive_poll/&#39;, include(&#39;interactive_poll.foo.urls&#39;)),</span>

     <span class="c"># Uncomment the admin/doc line below to enable admin documentation:</span>
     <span class="c"># url(r&#39;^admin/doc/&#39;, include(&#39;django.contrib.admindocs.urls&#39;)),</span>

     <span class="c"># Uncomment the next line to enable the admin:</span>
     <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^admin/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">)),</span>
 <span class="p">)</span>
</pre></div>
</div>
<p>Open up views.py in the polls folder and add all of the following.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">polls.models</span> <span class="kn">import</span> <span class="n">Poll</span>
<span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span>

<span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A list of the five most recent polls.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">poll_list</span> <span class="o">=</span> <span class="n">Poll</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s">&#39;-pub_date&#39;</span><span class="p">)[:</span><span class="mi">5</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">&#39;index.html&#39;</span><span class="p">,</span> <span class="p">{</span>
        <span class="s">&#39;poll_list&#39;</span><span class="p">:</span> <span class="n">poll_list</span>
    <span class="p">})</span>
</pre></div>
</div>
<p>Create a &#8220;templates&#8221; folder inside the &#8220;polls&#8221; folder and then create an index.html file in there. Add the following.</p>
<div class="highlight-html+django"><div class="highlight"><pre><span class="nt">&lt;ul&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">object</span> <span class="k">in</span> <span class="nv">poll_list</span> <span class="cp">%}</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;/polls/</span><span class="cp">{{</span> <span class="nv">object.id</span> <span class="cp">}}</span><span class="s">/&quot;</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">object.title</span> <span class="cp">}}</span><span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="cp">{%</span> <span class="k">empty</span> <span class="cp">%}</span>
    <span class="nt">&lt;p&gt;</span>No polls are available.<span class="nt">&lt;/p&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="nt">&lt;/ul&gt;</span>
</pre></div>
</div>
<p>Now fire up the runserver and watch it fly in your browser at <a class="reference external" href="http://localhost:8000">http://localhost:8000</a>.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>python manage.py runserver
</pre></div>
</div>
<p>Now create a detail page by adding the same set of an url, view and template. First the url.</p>
<div class="highlight-python"><div class="highlight"><pre> <span class="kn">from</span> <span class="nn">django.conf.urls.defaults</span> <span class="kn">import</span> <span class="n">patterns</span><span class="p">,</span> <span class="n">include</span><span class="p">,</span> <span class="n">url</span>

 <span class="c"># Uncomment the next two lines to enable the admin:</span>
 <span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
 <span class="n">admin</span><span class="o">.</span><span class="n">autodiscover</span><span class="p">()</span>

 <span class="n">urlpatterns</span> <span class="o">=</span> <span class="n">patterns</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span>
     <span class="c"># Examples:</span>
     <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^$&#39;</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="s">&#39;polls.views.index&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;polls_index_view&#39;</span><span class="p">),</span>
<span class="hll">     <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^polls/(?P&lt;poll_id&gt;\d+)/$&#39;</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="s">&#39;polls.views.detail&#39;</span><span class="p">,</span>
</span><span class="hll">         <span class="n">name</span><span class="o">=</span><span class="s">&#39;polls_detail_view&#39;</span><span class="p">),</span>
</span>
     <span class="c"># Uncomment the admin/doc line below to enable admin documentation:</span>
     <span class="c"># url(r&#39;^admin/doc/&#39;, include(&#39;django.contrib.admindocs.urls&#39;)),</span>

     <span class="c"># Uncomment the next line to enable the admin:</span>
     <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^admin/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">)),</span>
 <span class="p">)</span>
</pre></div>
</div>
<p>Then the view.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="hll"> <span class="kn">from</span> <span class="nn">django.db.models</span> <span class="kn">import</span> <span class="n">Sum</span>
</span> <span class="kn">from</span> <span class="nn">polls.models</span> <span class="kn">import</span> <span class="n">Poll</span>
 <span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span>

 <span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
     <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">     A list of the five most recent polls.</span>
<span class="sd">     &quot;&quot;&quot;</span>
     <span class="n">poll_list</span> <span class="o">=</span> <span class="n">Poll</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s">&#39;-pub_date&#39;</span><span class="p">)[:</span><span class="mi">5</span><span class="p">]</span>
     <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">&#39;index.html&#39;</span><span class="p">,</span> <span class="p">{</span>
         <span class="s">&#39;poll_list&#39;</span><span class="p">:</span> <span class="n">poll_list</span>
     <span class="p">})</span>

<span class="hll"> <span class="k">def</span> <span class="nf">detail</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">poll_id</span><span class="p">):</span>
</span><span class="hll">     <span class="sd">&quot;&quot;&quot;</span>
</span><span class="hll"><span class="sd">     A page where you vote on a particular poll.</span>
</span><span class="hll"><span class="sd">     &quot;&quot;&quot;</span>
</span><span class="hll">     <span class="n">p</span> <span class="o">=</span> <span class="n">Poll</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">poll_id</span><span class="p">)</span>
</span><span class="hll">     <span class="n">total</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">vote_set</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span><span class="nb">sum</span><span class="o">=</span><span class="n">Sum</span><span class="p">(</span><span class="s">&#39;choice&#39;</span><span class="p">))</span>
</span><span class="hll">     <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">&#39;detail.html&#39;</span><span class="p">,</span> <span class="p">{</span>
</span><span class="hll">         <span class="s">&#39;poll&#39;</span><span class="p">:</span> <span class="n">p</span><span class="p">,</span>
</span><span class="hll">         <span class="s">&#39;total&#39;</span><span class="p">:</span> <span class="n">total</span><span class="p">[</span><span class="s">&#39;sum&#39;</span><span class="p">]</span> <span class="ow">or</span> <span class="mi">0</span><span class="p">,</span>
</span><span class="hll">         <span class="s">&#39;request&#39;</span><span class="p">:</span> <span class="n">request</span><span class="p">,</span>
</span><span class="hll">     <span class="p">})</span>
</span></pre></div>
</div>
<p>Add a detail.html template.</p>
<div class="highlight-html+django"><div class="highlight"><pre><span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;style </span><span class="na">type=</span><span class="s">&quot;text/css&quot;</span><span class="nt">&gt;</span>
        <span class="nt">h3</span> <span class="p">{</span><span class="k">margin-bottom</span><span class="o">:</span><span class="m">40px</span><span class="p">;}</span>
        <span class="nc">.button</span> <span class="p">{</span> <span class="k">display</span><span class="o">:</span><span class="k">inline</span><span class="p">;</span> <span class="k">background-color</span><span class="o">:</span> <span class="nb">black</span><span class="p">;</span> <span class="k">color</span><span class="o">:</span><span class="nb">white</span><span class="p">;</span> <span class="k">padding</span><span class="o">:</span><span class="m">7px</span><span class="p">;</span> <span class="k">margin</span><span class="o">:</span> <span class="m">0</span> <span class="m">15px</span><span class="p">;</span> <span class="k">cursor</span><span class="o">:</span><span class="k">pointer</span><span class="p">;</span> <span class="p">}</span>
        <span class="nc">.button</span><span class="nd">:hover</span> <span class="p">{</span> <span class="k">background-color</span><span class="o">:</span><span class="m">#CCC</span><span class="p">;</span> <span class="p">}</span>
    <span class="nt">&lt;/style&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">align=</span><span class="s">&quot;center&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">&quot;title&quot;</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">poll</span> <span class="cp">}}</span><span class="nt">&lt;/h1&gt;</span>
        <span class="nt">&lt;h3</span> <span class="na">id=</span><span class="s">&quot;total&quot;</span><span class="nt">&gt;</span>Total: <span class="cp">{{</span> <span class="nv">total</span> <span class="cp">}}</span><span class="nt">&lt;/h3&gt;</span>
        <span class="nt">&lt;div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;yes&quot;</span> <span class="na">class=</span><span class="s">&quot;button&quot;</span><span class="nt">&gt;</span>YES<span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;no&quot;</span> <span class="na">class=</span><span class="s">&quot;button&quot;</span><span class="nt">&gt;</span>NO<span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<p>That&#8217;s great, but you can&#8217;t vote yet. To do that you&#8217;ll need another url and view where votes get handled. First the url.</p>
<div class="highlight-python"><div class="highlight"><pre> <span class="kn">from</span> <span class="nn">django.conf.urls.defaults</span> <span class="kn">import</span> <span class="n">patterns</span><span class="p">,</span> <span class="n">include</span><span class="p">,</span> <span class="n">url</span>

 <span class="c"># Uncomment the next two lines to enable the admin:</span>
 <span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
 <span class="n">admin</span><span class="o">.</span><span class="n">autodiscover</span><span class="p">()</span>

 <span class="n">urlpatterns</span> <span class="o">=</span> <span class="n">patterns</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span>
     <span class="c"># Examples:</span>
     <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^$&#39;</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="s">&#39;polls.views.index&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;polls_index_view&#39;</span><span class="p">),</span>
     <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^polls/(?P&lt;poll_id&gt;\d+)/$&#39;</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="s">&#39;polls.views.detail&#39;</span><span class="p">,</span>
         <span class="n">name</span><span class="o">=</span><span class="s">&#39;polls_detail_view&#39;</span><span class="p">),</span>
<span class="hll">     <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^polls/(?P&lt;poll_id&gt;\d+)/vote/$&#39;</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="s">&#39;polls.views.vote&#39;</span><span class="p">,</span>
</span><span class="hll">         <span class="n">name</span><span class="o">=</span><span class="s">&#39;polls_vote_view&#39;</span><span class="p">),</span>
</span>
     <span class="c"># Uncomment the admin/doc line below to enable admin documentation:</span>
     <span class="c"># url(r&#39;^admin/doc/&#39;, include(&#39;django.contrib.admindocs.urls&#39;)),</span>

     <span class="c"># Uncomment the next line to enable the admin:</span>
     <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^admin/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">)),</span>
 <span class="p">)</span>
</pre></div>
</div>
<p>Then then view.</p>
<div class="highlight-python"><div class="highlight"><pre> <span class="kn">from</span> <span class="nn">django.db.models</span> <span class="kn">import</span> <span class="n">Sum</span>
 <span class="kn">from</span> <span class="nn">polls.models</span> <span class="kn">import</span> <span class="n">Poll</span>
 <span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render</span>
<span class="hll"> <span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponse</span>
</span><span class="hll"> <span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">get_object_or_404</span>
</span><span class="hll"> <span class="kn">from</span> <span class="nn">django.views.decorators.csrf</span> <span class="kn">import</span> <span class="n">csrf_exempt</span>
</span>
 <span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
     <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">     A list of the five most recent polls.</span>
<span class="sd">     &quot;&quot;&quot;</span>
     <span class="n">poll_list</span> <span class="o">=</span> <span class="n">Poll</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s">&#39;-pub_date&#39;</span><span class="p">)[:</span><span class="mi">5</span><span class="p">]</span>
     <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">&#39;index.html&#39;</span><span class="p">,</span> <span class="p">{</span>
         <span class="s">&#39;poll_list&#39;</span><span class="p">:</span> <span class="n">poll_list</span>
     <span class="p">})</span>

 <span class="k">def</span> <span class="nf">detail</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">poll_id</span><span class="p">):</span>
     <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">     A page where you vote on a particular poll.</span>
<span class="sd">     &quot;&quot;&quot;</span>
     <span class="n">p</span> <span class="o">=</span> <span class="n">Poll</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">poll_id</span><span class="p">)</span>
     <span class="n">total</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">vote_set</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span><span class="nb">sum</span><span class="o">=</span><span class="n">Sum</span><span class="p">(</span><span class="s">&#39;choice&#39;</span><span class="p">))</span>
     <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">&#39;detail.html&#39;</span><span class="p">,</span> <span class="p">{</span>
         <span class="s">&#39;poll&#39;</span><span class="p">:</span> <span class="n">p</span><span class="p">,</span>
         <span class="s">&#39;total&#39;</span><span class="p">:</span> <span class="n">total</span><span class="p">[</span><span class="s">&#39;sum&#39;</span><span class="p">]</span> <span class="ow">or</span> <span class="mi">0</span><span class="p">,</span>
         <span class="s">&#39;request&#39;</span><span class="p">:</span> <span class="n">request</span><span class="p">,</span>
     <span class="p">})</span>

<span class="hll"> <span class="nd">@csrf_exempt</span>
</span><span class="hll"> <span class="k">def</span> <span class="nf">vote</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">poll_id</span><span class="p">):</span>
</span><span class="hll">     <span class="sd">&quot;&quot;&quot;</span>
</span><span class="hll"><span class="sd">     The hidden url where votes are sent</span>
</span><span class="hll"><span class="sd">     to be added to the database.</span>
</span><span class="hll"><span class="sd">     &quot;&quot;&quot;</span>
</span><span class="hll">     <span class="n">p</span> <span class="o">=</span> <span class="n">get_object_or_404</span><span class="p">(</span><span class="n">Poll</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">poll_id</span><span class="p">)</span>
</span><span class="hll">     <span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;data&quot;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
</span><span class="hll">     <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="p">:</span>
</span><span class="hll">         <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">405</span><span class="p">)</span>
</span><span class="hll">     <span class="k">if</span> <span class="n">data</span> <span class="o">==</span> <span class="s">&quot;-1&quot;</span><span class="p">:</span>
</span><span class="hll">         <span class="n">value</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
</span><span class="hll">     <span class="k">else</span><span class="p">:</span>
</span><span class="hll">         <span class="n">value</span> <span class="o">=</span> <span class="mi">1</span>
</span><span class="hll">     <span class="n">v</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">vote_set</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">choice</span><span class="o">=</span><span class="n">value</span><span class="p">)</span>
</span><span class="hll">     <span class="n">v</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span class="hll">     <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</span></pre></div>
</div>
<p>Then add some JavaScript to the detail template where the page can interact with the database using this new view.</p>
<div class="highlight-html+django"><div class="highlight"><pre> <span class="nt">&lt;html&gt;</span>
 <span class="nt">&lt;head&gt;</span>
     <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
     <span class="nt">&lt;style </span><span class="na">type=</span><span class="s">&quot;text/css&quot;</span><span class="nt">&gt;</span>
         <span class="nt">h3</span> <span class="p">{</span><span class="k">margin-bottom</span><span class="o">:</span><span class="m">40px</span><span class="p">;}</span>
         <span class="nc">.button</span> <span class="p">{</span> <span class="k">display</span><span class="o">:</span><span class="k">inline</span><span class="p">;</span> <span class="k">background-color</span><span class="o">:</span> <span class="nb">black</span><span class="p">;</span> <span class="k">color</span><span class="o">:</span><span class="nb">white</span><span class="p">;</span> <span class="k">padding</span><span class="o">:</span><span class="m">7px</span><span class="p">;</span> <span class="k">margin</span><span class="o">:</span> <span class="m">0</span> <span class="m">15px</span><span class="p">;</span> <span class="k">cursor</span><span class="o">:</span><span class="k">pointer</span><span class="p">;</span> <span class="p">}</span>
         <span class="nc">.button</span><span class="nd">:hover</span> <span class="p">{</span> <span class="k">background-color</span><span class="o">:</span><span class="m">#CCC</span><span class="p">;</span> <span class="p">}</span>
     <span class="nt">&lt;/style&gt;</span>
 <span class="nt">&lt;/head&gt;</span>
 <span class="nt">&lt;body&gt;</span>
     <span class="nt">&lt;div</span> <span class="na">align=</span><span class="s">&quot;center&quot;</span><span class="nt">&gt;</span>
         <span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">&quot;title&quot;</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">poll</span> <span class="cp">}}</span><span class="nt">&lt;/h1&gt;</span>
         <span class="nt">&lt;h3</span> <span class="na">id=</span><span class="s">&quot;total&quot;</span><span class="nt">&gt;</span>Total: <span class="cp">{{</span> <span class="nv">total</span> <span class="cp">}}</span><span class="nt">&lt;/h3&gt;</span>
         <span class="nt">&lt;div&gt;</span>
             <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;yes&quot;</span> <span class="na">class=</span><span class="s">&quot;button&quot;</span><span class="nt">&gt;</span>YES<span class="nt">&lt;/div&gt;</span>
             <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;no&quot;</span> <span class="na">class=</span><span class="s">&quot;button&quot;</span><span class="nt">&gt;</span>NO<span class="nt">&lt;/div&gt;</span>
         <span class="nt">&lt;/div&gt;</span>
     <span class="nt">&lt;/div&gt;</span>
<span class="hll">     <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
</span><span class="hll">         <span class="kd">var</span> <span class="nx">currentTotal</span> <span class="o">=</span> <span class="cp">{{</span> <span class="nv">total</span> <span class="cp">}}</span><span class="p">;</span>
</span><span class="hll">         <span class="kd">var</span> <span class="nx">vote</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
</span><span class="hll">             <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
</span><span class="hll">               <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;POST&#39;</span><span class="p">,</span>
</span><span class="hll">               <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;http://</span><span class="cp">{{</span> <span class="nv">request.get_host</span> <span class="cp">}}</span><span class="s1">/polls/</span><span class="cp">{{</span> <span class="nv">poll.id</span> <span class="cp">}}</span><span class="s1">/vote/&#39;</span><span class="p">,</span>
</span><span class="hll">               <span class="nx">data</span><span class="o">:</span> <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="o">:</span> <span class="nx">data</span><span class="p">}</span>
</span><span class="hll">             <span class="p">});</span>
</span><span class="hll">             <span class="nx">currentTotal</span> <span class="o">+=</span> <span class="nx">data</span><span class="p">;</span>
</span><span class="hll">             <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#total&quot;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s2">&quot;Total: &quot;</span> <span class="o">+</span> <span class="nx">currentTotal</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
</span><span class="hll">         <span class="p">};</span>
</span><span class="hll">         <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#yes&quot;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class="hll">             <span class="nx">vote</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span><span class="hll">         <span class="p">});</span>
</span><span class="hll">         <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#no&quot;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span><span class="hll">             <span class="nx">vote</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
</span><span class="hll">         <span class="p">});</span>
</span><span class="hll">     <span class="nt">&lt;/script&gt;</span>
</span> <span class="nt">&lt;/body&gt;</span>
 <span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<p>Now reload the page and it should all work. You did it!</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">First News App</a><ul>
<li><a class="reference internal" href="#prelude-hello-command-line">Prelude: Hello command line</a><ul>
<li><a class="reference internal" href="#id1">Command-line interface</a></li>
<li><a class="reference internal" href="#id2">Text editor</a></li>
<li><a class="reference internal" href="#git-and-github">Git and GitHub</a></li>
<li><a class="reference internal" href="#id4">Python</a></li>
<li><a class="reference internal" href="#id5">pip</a></li>
</ul>
</li>
<li><a class="reference internal" href="#act-1-hello-database">Act 1: Hello Database</a></li>
<li><a class="reference internal" href="#act-2-hello-admin">Act 2: Hello Admin</a></li>
<li><a class="reference internal" href="#act-3-hello-internets">Act 3: Hello Internets</a></li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/index.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li><a href="#">First News App 2.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Investigative Reporters and Editors.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.1.
    </div>
  </body>
</html>